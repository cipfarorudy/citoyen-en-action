# Azure Deployment Plan for Citoyen en Action Project

## **Goal**
DÃ©ployer l'application React/Vite "Citoyen en Action" sur Azure en utilisant Azure Static Web Apps pour une performance optimale et un coÃ»t minimal.

## **Project Information**

AppName: citoyen-en-action
- **Technology Stack**: React 19.1.1 + TypeScript + Vite 7.1.9
- **Application Type**: Single Page Application (SPA) pour dÃ©bats citoyens et engagement civique
- **Build System**: Vite avec TypeScript compilation
- **Deployment Type**: Static Site Generation (SSG) optimisÃ©
- **Content**: 8 pages, ressources pÃ©dagogiques, intÃ©gration rÃ©seaux sociaux
- **Target Audience**: Citoyens de Guadeloupe et communautÃ© francophone
- **Dependencies**: Aucune base de donnÃ©es ou API externe requise
- **Hosting Recommendation**: Azure Static Web Apps pour applications SPA modernes

## **Azure Resources Architecture**

> **Install the mermaid extension in IDE to view the architecture.**

```mermaid
graph TB
    User[Utilisateurs Guadeloupe] --> CDN[Azure CDN]
    CDN --> SWA[Azure Static Web Apps]
    SWA --> AppInsights[Application Insights]
    SWA --> LogWorkspace[Log Analytics]
    GitHub[GitHub Repository] --> SWA
    SWA --> CustomDomain[Domaine personnalisÃ©]
    
    subgraph "Azure Resource Group"
        SWA
        AppInsights
        LogWorkspace
    end
    
    subgraph "External Integrations"
        TikTok[@farorudy TikTok]
        WhatsApp[Groupe WhatsApp DÃ©bat citoyen]
        Discord[Discord Server]
    end
    
    User --> TikTok
    User --> WhatsApp
    User --> Discord
```

**Data Flow:**
- Les utilisateurs accÃ¨dent au site via Azure CDN pour une performance optimale
- Azure Static Web Apps sert le contenu statique gÃ©nÃ©rÃ© par Vite
- Application Insights collecte les mÃ©triques d'utilisation et performance
- Les intÃ©grations externes (TikTok, WhatsApp, Discord) sont accessibles via des liens
- Le dÃ©ploiement automatique se fait depuis le repository GitHub

## **Recommended Azure Resources**

**Application principale**
- **Application Citoyen en Action**
  - **Hosting Service Type**: Azure Static Web Apps (SWA)
  - **SKU**: Standard (support domaine personnalisÃ© + authentification)
  - **Performance**: DÃ©ploiement global, CDN intÃ©grÃ©, HTTPS automatique
  - **Configuration**:
    - **Runtime**: Node.js (build uniquement)
    - **Build Command**: `npm run build`
    - **Output Location**: `dist`
    - **App Location**: `/`
    - **Environment Variables**: 
      - `NODE_VERSION`: "18"
      - `VITE_APP_TITLE`: "Citoyen en Action"

**Services de support recommandÃ©s**
- **Application Insights**
  - **Purpose**: Monitoring performance et analytics utilisateur
  - **Configuration**: Collecte automatique des mÃ©triques SPA
  
- **Log Analytics Workspace**
  - **Purpose**: Centralisation des logs et monitoring
  - **Retention**: 30 jours (plan gratuit)

**Configuration de sÃ©curitÃ© recommandÃ©e**
- **HTTPS**: ActivÃ© par dÃ©faut avec certificats SSL automatiques
- **Custom Domain**: Support pour domaine personnalisÃ© (ex: citoyenenaction.fr)
- **Geographic Restrictions**: Pas nÃ©cessaire (audience internationale francophone)
- **Authentication**: Pas requis (site public)

## **Execution Steps**

> **Below are the steps for Copilot to follow; ask Copilot to update or execute this plan.**

### 1. **Setup Azure Infrastructure**
1. **Generate Infrastructure as Code (Bicep files)**:
   - Get IaC rules with `iac-rules-get` command
   - Create Bicep templates for Static Web Apps
   - Include Application Insights and Log Analytics
   
2. **Pre-deployment validation**:
   - Use `get_errors` tool to check Bicep syntax
   - Validate resource availability in target region
   
3. **Deploy infrastructure**:
   - Run `azd provision --preview` for validation
   - Execute `azd up` for full deployment
   - Verify resources creation in Azure Portal

### 2. **Configure Static Web App**
1. **Setup CI/CD Pipeline**:
   - Connect GitHub repository to Static Web Apps
   - Configure build settings (Node.js, Vite)
   - Set environment variables
   
2. **Validate Deployment**:
   - Check application logs with `azd-app-log-get`
   - Verify site accessibility and functionality
   - Test all 8 pages and social media links

### 3. **Post-Deployment Configuration**
1. **Custom Domain** (Optionnel):
   - Configure DNS records
   - Validate SSL certificate
   
2. **Monitoring Setup**:
   - Configure Application Insights alerts
   - Setup usage analytics dashboard

### 4. **Final Validation & Summary**
1. **Performance Testing**:
   - Test loading times from different locations
   - Verify CDN performance
   - Check mobile responsiveness
   
2. **Create Deployment Summary**:
   - Document all deployed resources
   - Save configuration in `.azure/summary.copilotmd`
   - Provide access URLs and monitoring dashboard links

## **Estimated Deployment Timeline**
- **Infrastructure**: 10-15 minutes
- **Application Deployment**: 5-10 minutes  
- **Total**: ~25 minutes

## **Benefits of Azure Static Web Apps for this project**
- âœ… **Performance**: CDN global intÃ©grÃ©
- âœ… **CoÃ»t**: Plan gratuit disponible (100GB bandwidth/mois)
- âœ… **SimplicitÃ©**: CI/CD automatique depuis GitHub
- âœ… **SÃ©curitÃ©**: HTTPS par dÃ©faut, isolation des environnements
- âœ… **ScalabilitÃ©**: Auto-scaling selon le trafic
- âœ… **Monitoring**: Application Insights intÃ©grÃ©

---

**Ready to execute this plan? Run the steps above to deploy "Citoyen en Action" on Azure! ðŸš€**